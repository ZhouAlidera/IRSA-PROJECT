<div class="w-full bg-white/80 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50">
    <div class="max-w-[95rem] mx-auto px-6 lg:px-10">
        <div class="flex items-center justify-between py-5 overflow-x-auto no-scrollbar">
            
            {% with steps="1,2,3,4,5,6" %}
            {% for step_num in "123456"|make_list %}
                {% with step_int=step_num|add:"0" %}
                
                <div class="flex items-center {% if not forloop.last %}flex-1{% endif %}">
                    <div class="flex items-center gap-4 group min-w-max">
                        <div class="relative">
                            {% if current_step == step_int %}
                                <div class="absolute inset-0 rounded-2xl bg-emerald-500 animate-ping opacity-20"></div>
                            {% endif %}
                            
                            <div class="relative w-12 h-12 rounded-2xl flex items-center justify-center font-black text-xs transition-all duration-500 border-2
                                {% if current_step == step_int %} 
                                    bg-slate-900 text-white border-slate-900 shadow-xl shadow-slate-200 scale-110 z-10
                                {% elif current_step > step_int %} 
                                    bg-emerald-50 text-emerald-600 border-emerald-100
                                {% else %} 
                                    bg-white text-slate-300 border-slate-100
                                {% endif %}">
                                
                                {% if current_step > step_int %}
                                    <svg class="w-6 h-6 animate-check" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                                {% else %}
                                    <span>{{ step_int }}</span>
                                {% endif %}
                            </div>
                        </div>

                        <div class="flex flex-col">
                            <span class="text-[8px] font-black uppercase tracking-[0.2em] transition-colors
                                {% if current_step == step_int %} text-emerald-600 {% else %} text-slate-400 {% endif %}">
                                {% if step_int == 1 %}Initial{% elif step_int == 2 %}Fichiers{% elif step_int == 3 %}Analyse{% elif step_int == 4 %}Calculs{% elif step_int == 5 %}Fiscalité{% else %}Succès{% endif %}
                            </span>
                            <span class="text-[10px] font-bold uppercase tracking-tight transition-colors
                                {% if current_step == step_int %} text-slate-900 {% else %} text-slate-400 {% endif %}">
                                {% if step_int == 1 %}Présentation{% elif step_int == 2 %}Pièces Jointes{% elif step_int == 3 %}Synthèse{% elif step_int == 4 %}Détails{% elif step_int == 5 %}Déclaration{% else %}Confirmation{% endif %}
                            </span>
                        </div>
                    </div>

                    {% if not forloop.last %}
                    <div class="h-[2px] flex-1 mx-6 rounded-full bg-slate-50 overflow-hidden hidden xl:block relative">
                        {% if current_step > step_int %}
                            <div class="absolute inset-0 bg-emerald-500 transition-all duration-1000">
                                <div class="flow-line"></div>
                            </div>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                
                {% endwith %}
            {% endfor %}
            {% endwith %}

        </div>
    </div>
</div>

<style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    .flow-line {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
        animation: flow 2s infinite linear;
    }

    @keyframes flow {
        from { transform: translateX(-100%); }
        to { transform: translateX(100%); }
    }

    @keyframes check-in {
        from { transform: scale(0.5); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }
    .animate-check { animation: check-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
</style>