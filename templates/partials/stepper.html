<div class="w-full bg-[#1e293b] border-b border-slate-700 sticky top-0 z-50 shadow-2xl">
    <div class="max-w-[95rem] mx-auto px-4 lg:px-12">
        <div class="flex items-center justify-between py-6 overflow-x-auto no-scrollbar">
            
            {% with steps="1,2,3,4,5,6" %}
            {% for step_num in "123456"|make_list %}
                {% with step_int=step_num|add:"0" %}
                
                <div class="flex items-center {% if not forloop.last %}flex-1{% endif %}">
                    <div class="flex items-center gap-4 group">
                        <div class="relative">
                            {% if current_step == step_int %}
                                <div class="absolute inset-0 rounded-[1.3rem] bg-[#2D8B8B] animate-ping opacity-20"></div>
                                <div class="absolute inset-0 rounded-[1.3rem] bg-[#2D8B8B] animate-pulse opacity-40"></div>
                            {% endif %}
                            
                            <div class="relative w-13 h-13 rounded-[1.3rem] flex items-center justify-center font-black text-[13px] tracking-tighter transition-all duration-700 border-2
                                {% if current_step == step_int %} 
                                    bg-[#2D8B8B] text-white border-emerald-400 shadow-[0_0_25px_rgba(45,139,139,0.5)] scale-110 z-10
                                {% elif current_step > step_int %} 
                                    bg-emerald-500/20 text-emerald-400 border-emerald-500/50
                                {% else %} 
                                    bg-slate-800 text-slate-500 border-slate-700
                                {% endif %}">
                                
                                {% if current_step > step_int %}
                                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                                {% else %}
                                    <span>0{{ step_int }}</span>
                                {% endif %}
                            </div>
                        </div>

                        <div class="flex flex-col min-w-max">
                            <span class="text-[8px] font-black uppercase tracking-[0.3em] transition-colors duration-500
                                {% if current_step == step_int %} text-emerald-400 {% else %} text-slate-500 {% endif %}">
                                {% if step_int == 1 %}Initial{% elif step_int == 2 %}Fichiers{% elif step_int == 3 %}Analyse{% elif step_int == 4 %}Calculs{% elif step_int == 5 %}Fiscalité{% else %}Succès{% endif %}
                            </span>
                            <span class="text-[11px] font-black uppercase italic tracking-tighter transition-colors duration-500
                                {% if current_step == step_int %} text-white {% else %} text-slate-400 {% endif %}">
                                {% if step_int == 1 %}Présentation{% elif step_int == 2 %}Pièces Jointes{% elif step_int == 3 %}Synthèse{% elif step_int == 4 %}Détails{% elif step_int == 5 %}Déclaration{% else %}Confirmation{% endif %}
                            </span>
                        </div>
                    </div>

                    {% if not forloop.last %}
                    <div class="h-[3px] flex-1 mx-8 rounded-full bg-slate-800 overflow-hidden hidden xl:block relative">
                        {% if current_step > step_int %}
                            <div class="absolute inset-0 bg-[#2D8B8B]">
                                <div class="flow-line"></div>
                            </div>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                
                {% endwith %}
            {% endfor %}
            {% endwith %}

        </div>
    </div>
</div>

<style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Animation de flux lumineux pour la ligne */
    .flow-line {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
        animation: flow 1.5s infinite linear;
    }

    @keyframes flow {
        from { transform: translateX(-100%); }
        to { transform: translateX(100%); }
    }

    .w-13 { width: 3.25rem; }
    .h-13 { height: 3.25rem; }

    /* Entrée en douceur des icônes check */
    @keyframes check-in {
        from { transform: scale(0) rotate(-45deg); opacity: 0; }
        to { transform: scale(1) rotate(0); opacity: 1; }
    }
    .duration-700 svg { animation: check-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
</style>